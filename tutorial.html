

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Tutorial &mdash; cutplace 0.7.0 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.7.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/cutplace_logo_32x32.ico"/>
    <link rel="top" title="cutplace 0.7.0 documentation" href="index.html" />
    <link rel="next" title="Writing an Interface Control Document" href="writing-an-icd.html" />
    <link rel="prev" title="Download and Installation" href="installation.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="writing-an-icd.html" title="Writing an Interface Control Document"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Download and Installation"
             accesskey="P">previous</a> |</li>
        <li><a href="contents.html">cutplace 0.7.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="contents.html">
              <img class="logo" src="_static/cutplace_logo_64x64.png" alt="Logo"/>
            </a></p>
  <h3><a href="contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Tutorial</a><ul>
<li><a class="reference internal" href="#a-simple-set-of-customer-data">A simple set of customer data</a></li>
<li><a class="reference internal" href="#describing-data-format-and-and-field-names">Describing data format and and field names</a></li>
<li><a class="reference internal" href="#using-comments">Using comments</a></li>
<li><a class="reference internal" href="#how-and-where-to-store-the-icd">How and where to store the ICD</a></li>
<li><a class="reference internal" href="#running-cutplace-for-the-first-time">Running cutplace for the first time</a></li>
<li><a class="reference internal" href="#summary-so-far">Summary so far</a></li>
<li><a class="reference internal" href="#adding-examples">Adding examples</a></li>
<li><a class="reference internal" href="#allowing-fields-to-be-empty">Allowing fields to be empty</a></li>
<li><a class="reference internal" href="#limiting-the-length-of-field-values">Limiting the length of field values</a></li>
<li><a class="reference internal" href="#field-types-and-rules">Field types and rules</a></li>
<li><a class="reference internal" href="#checking-general-conditions">Checking general conditions</a></li>
<li><a class="reference internal" href="#sniffing-drafts-from-data">Sniffing drafts from data</a></li>
<li><a class="reference internal" href="#conclusion">Conclusion</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="installation.html"
                        title="previous chapter">Download and Installation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="writing-an-icd.html"
                        title="next chapter">Writing an Interface Control Document</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="tutorial">
<span id="id1"></span><h1>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h1>
<p>This chapter gives a gentle introduction and overview to cutplace. It
introduces a simple set of example data and shows how to write a simple
interface control document (ICD) for it which can be used to validate
the data. Starting from there, the ICD gets refined and improved to
allow more rigorous validations which detect increasingly subtle errors
in the data.</p>
<p>You can find the files for the examples in the <tt class="docutils literal"><span class="pre">examples</span></tt> folder of
the cutplace source distribution. For your convenience they are also
provided as links at the bottom of each data or ICD file.</p>
<div class="section" id="a-simple-set-of-customer-data">
<h2>A simple set of customer data<a class="headerlink" href="#a-simple-set-of-customer-data" title="Permalink to this headline">¶</a></h2>
<p>In order to make use of cutplace, you need some data. For this tutorial,
we will use a simple set of customer data:</p>
<div class="highlight-python"><pre>Branch id,Customer id,First name,Surname,Gender,Date of birth
38000,16,Daisy,Mason,female,27.02.1946
38000,42,Wendy,Davis,female,30.12.1971
38000,57,Keith,Parker,male,02.06.1984
38000,76,Kenneth,Tucker,male,15.11.1908
38053,11,Carlos,Barrett,male,09.02.1929
38053,20,Terrance,Hart,male,11.03.1961
38053,34,Lori,Dunn,female,26.09.1996
38053,73,Mary,Sutton,female,09.12.1982
38053,83,Lorraine,Castro,female,15.08.1978
38111,16,Esther,Newman,female,23.03.1932
38111,79,Tyler,Rose,male,17.12.1920
38111,127,Andrew,Dixon,male,02.10.1913
</pre>
</div>
<p>See: <a class="reference download internal" href="_downloads/customers.csv"><tt class="xref download docutils literal"><span class="pre">customers.csv</span></tt></a></p>
<p>Because this is hard to read here is how the file looks if you
open it in a spreadsheet application such as Excel or Calc:</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="20%" />
<col width="18%" />
<col width="13%" />
<col width="11%" />
<col width="23%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" rowspan="2">Branch id</th>
<th class="head" rowspan="2">Customer id</th>
<th class="head" rowspan="2">First name</th>
<th class="head" rowspan="2">Surname</th>
<th class="head" rowspan="2">Gender</th>
<th class="head" rowspan="2">Date of birth</th>
</tr>
<tr class="row-even"></tr>
</thead>
<tbody valign="top">
<tr class="row-odd"><td rowspan="2">38000</td>
<td rowspan="2">16</td>
<td rowspan="2">Daisy</td>
<td rowspan="2">Mason</td>
<td rowspan="2">female</td>
<td rowspan="2">27.02.1946</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">38000</td>
<td rowspan="2">42</td>
<td rowspan="2">Wendy</td>
<td rowspan="2">Davis</td>
<td rowspan="2">female</td>
<td rowspan="2">30.12.1971</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">38000</td>
<td rowspan="2">57</td>
<td rowspan="2">Keith</td>
<td rowspan="2">Parker</td>
<td rowspan="2">male</td>
<td rowspan="2">02.06.1984</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">38000</td>
<td rowspan="2">76</td>
<td rowspan="2">Kenneth</td>
<td rowspan="2">Tucker</td>
<td rowspan="2">male</td>
<td rowspan="2">15.11.1908</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">38053</td>
<td rowspan="2">11</td>
<td rowspan="2">Carlos</td>
<td rowspan="2">Barrett</td>
<td rowspan="2">male</td>
<td rowspan="2">09.02.1929</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">38053</td>
<td rowspan="2">20</td>
<td rowspan="2">Terrance</td>
<td rowspan="2">Hart</td>
<td rowspan="2">male</td>
<td rowspan="2">11.03.1961</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">38053</td>
<td rowspan="2">34</td>
<td rowspan="2">Lori</td>
<td rowspan="2">Dunn</td>
<td rowspan="2">female</td>
<td rowspan="2">26.09.1996</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">38053</td>
<td rowspan="2">73</td>
<td rowspan="2">Mary</td>
<td rowspan="2">Sutton</td>
<td rowspan="2">female</td>
<td rowspan="2">09.12.1982</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">38053</td>
<td rowspan="2">83</td>
<td rowspan="2">Lorraine</td>
<td rowspan="2">Castro</td>
<td rowspan="2">female</td>
<td rowspan="2">15.08.1978</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">38111</td>
<td rowspan="2">31</td>
<td rowspan="2">Esther</td>
<td rowspan="2">Newman</td>
<td rowspan="2">female</td>
<td rowspan="2">23.03.1932</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">38111</td>
<td rowspan="2">79</td>
<td rowspan="2">Tyler</td>
<td rowspan="2">Rose</td>
<td rowspan="2">male</td>
<td rowspan="2">17.12.1920</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">38111</td>
<td rowspan="2">127</td>
<td rowspan="2">Andrew</td>
<td rowspan="2">Dixon</td>
<td rowspan="2">male</td>
<td rowspan="2">02.10.1913</td>
</tr>
<tr class="row-even"></tr>
</tbody>
</table>
</div>
<div class="section" id="describing-data-format-and-and-field-names">
<h2>Describing data format and and field names<a class="headerlink" href="#describing-data-format-and-and-field-names" title="Permalink to this headline">¶</a></h2>
<p>Now let&#8217;s try to describe the format of this file. From our initial
pondering we already know the following facts:</p>
<ol class="arabic simple">
<li>The data are provided as comma separated values (CSV).</li>
<li>The fields in the data have a meaning we can assign a heading to.</li>
</ol>
<p>Without much further ado, here&#8217;s how you can tell these facts to cutplace:</p>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="83%" />
<col width="13%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td rowspan="2">&nbsp;</td>
<td rowspan="2">Interface: customer</td>
<td rowspan="2">&nbsp;</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">&nbsp;</td>
<td rowspan="2">&nbsp;</td>
<td rowspan="2">&nbsp;</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">&nbsp;</td>
<td rowspan="2"><strong>Data format</strong></td>
<td rowspan="2">&nbsp;</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">D</td>
<td rowspan="2">Format</td>
<td rowspan="2">CSV</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">D</td>
<td rowspan="2">Header</td>
<td rowspan="2">1</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">&nbsp;</td>
<td rowspan="2">&nbsp;</td>
<td rowspan="2">&nbsp;</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">&nbsp;</td>
<td rowspan="2"><strong>Fields</strong></td>
<td rowspan="2">&nbsp;</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">branch_id</td>
<td rowspan="2">&nbsp;</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">customer_id</td>
<td rowspan="2">&nbsp;</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">first_name</td>
<td rowspan="2">&nbsp;</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">surname</td>
<td rowspan="2">&nbsp;</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">gender</td>
<td rowspan="2">&nbsp;</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">date_of_birth</td>
<td rowspan="2">&nbsp;</td>
</tr>
<tr class="row-even"></tr>
</tbody>
</table>
<p>See: <a class="reference download internal" href="_downloads/icd_customers_field_names_only.csv"><tt class="xref download docutils literal"><span class="pre">icd_customers_field_names_only.csv</span></tt></a>
or <a class="reference download internal" href="_downloads/icd_customers_field_names_only.ods"><tt class="xref download docutils literal"><span class="pre">icd_customers_field_names_only.ods</span></tt></a></p>
<p>Let&#8217;s take a closer look at this.</p>
<p>Row 1 is a heading that simply describes what the document is about: the
interface for customer data.</p>
<p>Row 3 is a section heading to point out that the description of the data
format is about to follow.</p>
<p>Row 4 describes the data format by stating that the <tt class="docutils literal"><span class="pre">Format</span></tt> is <tt class="docutils literal"><span class="pre">CSV</span></tt>. Did
you notice the <tt class="docutils literal"><span class="pre">D</span></tt> in the first column? This is a hint for cutplace that the
row contains information about the data format it should be able to process.</p>
<p>Row 5 adds another detail to the data format: data files have a header row
that does not contain data yet. In this case there is only one such row. If
there would no header at all, you could have omitted this row.</p>
<p>Row 7 again is a section heading, this time pointing out that
descriptions about the field formats are about to follow.</p>
<p>The remaining rows then describe the fields that data files must have.
So far we only describe the name of the field, for example
<tt class="docutils literal"><span class="pre">customer_id</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>A field name must contain only ASCII letters, numbers and underscore
(_). So blanks, foreign characters such as umlauts and
punctuation marks are not allowed and will result in an error message
when cutplace attempts to read the ICD.</p>
<p>Some examples for valid field names:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">customer_id</span></tt></li>
<li><tt class="docutils literal"><span class="pre">iso_5218_gender</span></tt></li>
<li><tt class="docutils literal"><span class="pre">CustomerId</span></tt></li>
</ul>
<p>For comparison, here are a few broken field names</p>
<ul class="last simple">
<li><tt class="docutils literal"><span class="pre">customer-id</span></tt> - error: contains the punctuation mark &#8220;<tt class="docutils literal"><span class="pre">-</span></tt>&#8221;;
use &#8220;<tt class="docutils literal"><span class="pre">_</span></tt>&#8221; instead.</li>
<li><tt class="docutils literal"><span class="pre">customer</span> <span class="pre">id</span></tt>  - error: contains a blank; use &#8220;<tt class="docutils literal"><span class="pre">_</span></tt>&#8221; instead.</li>
<li><tt class="docutils literal"><span class="pre">123easy</span></tt> - error: starts with a numeric digit; use a letter as
first character.</li>
</ul>
</div>
</div>
<div class="section" id="using-comments">
<h2>Using comments<a class="headerlink" href="#using-comments" title="Permalink to this headline">¶</a></h2>
<p>As already pointed out, if a row in the ICD starts with an empty column,
cutplace skips it without processing in any way. Actually, this would
mean the same for cutplace:</p>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="83%" />
<col width="13%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td rowspan="2">D</td>
<td rowspan="2">Format</td>
<td rowspan="2">CSV</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">D</td>
<td rowspan="2">Header</td>
<td rowspan="2">1</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">branch_id</td>
<td rowspan="2">&nbsp;</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">customer_id</td>
<td rowspan="2">&nbsp;</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">first_name</td>
<td rowspan="2">&nbsp;</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">surname</td>
<td rowspan="2">&nbsp;</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">gender</td>
<td rowspan="2">&nbsp;</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">date_of_birth</td>
<td rowspan="2">&nbsp;</td>
</tr>
<tr class="row-even"></tr>
</tbody>
</table>
<p>But it&#8217;s a lot harder to read for you, isn&#8217;t it?</p>
</div>
<div class="section" id="how-and-where-to-store-the-icd">
<h2>How and where to store the ICD<a class="headerlink" href="#how-and-where-to-store-the-icd" title="Permalink to this headline">¶</a></h2>
<p>So how do you store this information? Cutplace is quite flexible here.
The easiest way would be to use a spreadsheet application such as Excel
or OpenOffice.org&#8217;s Calc and store it as <tt class="docutils literal"><span class="pre">*.xls</span></tt> or <tt class="docutils literal"><span class="pre">*.ods</span></tt> file.
Alternatively you can use the text editor or your choice and store it as
<tt class="docutils literal"><span class="pre">*.csv</span></tt>, where columns are separated with a comma (,) and data items
with blanks or commas are embedded between double quotes (&#8221;).</p>
<p>Concerning the location on your disk, cutplace does not impose any
requirements on you</p>
<p>For this tutorial, we assume both the data and ICD files are stored in
the same folder which and that your current console terminal session already
changed to this folder (using for example the command <tt class="docutils literal"><span class="pre">cd</span></tt>).</p>
</div>
<div class="section" id="running-cutplace-for-the-first-time">
<h2>Running cutplace for the first time<a class="headerlink" href="#running-cutplace-for-the-first-time" title="Permalink to this headline">¶</a></h2>
<p>Now that we have both a data file and an ICD file, we can finally take a look
at how cutplace actually works.</p>
<p>Open a terminal and change into the folder where where the example data
and ICD files are located:</p>
<div class="highlight-python"><pre>cd .../where/ever/examples</pre>
</div>
<p>Next let&#8217;s try if cutplace has been installed properly:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">cutplace</span> <span class="o">--</span><span class="n">version</span>
</pre></div>
</div>
<p>This should result in an output similar to:</p>
<div class="highlight-python"><pre>cutplace.py 0.x.x (2010-xx-xx, rxxx)
Python 2.5.5, Mac OS 10.5.8 (i386)</pre>
</div>
<p>The actual version numbers may vary. If your version of cutplace is older then
0.7.0, consider upgrading to avoid compatibility issues with this
tutorial.</p>
<p>If instead this results in an error message, refer to the chapter on
<a class="reference internal" href="installation.html"><em>Download and Installation</em></a> about how to setup cutplace.</p>
<p>In case everything worked out so far, let&#8217;s finally do what we came here
for: validate that our data conform to the interface we just described:</p>
<div class="highlight-python"><pre>cutplace icd_customers_1.ods customers_1.csv</pre>
</div>
<p>This assumes you used Calc to create the ICD. Users of Excel should
replace the &#8220;<tt class="docutils literal"><span class="pre">.ods</span></tt>&#8221; with &#8220;<tt class="docutils literal"><span class="pre">.xls</span></tt>&#8221;, users of text editors with
&#8220;<tt class="docutils literal"><span class="pre">.csv</span></tt>&#8221; respectively.</p>
</div>
<div class="section" id="summary-so-far">
<h2>Summary so far<a class="headerlink" href="#summary-so-far" title="Permalink to this headline">¶</a></h2>
<p>Let&#8217;s recap what we learned so far:</p>
<ul class="simple">
<li>You can use cutplace to validate that data conform to an ICD.</li>
<li>The ICD is a file you can create with Calc, Excel or your favorite
text editor.</li>
<li>As a minimum, the ICD has to specify the data format and the name of
the fields.</li>
<li>Rows describing the data format have to start with &#8220;<tt class="docutils literal"><span class="pre">D</span></tt>&#8221;.</li>
<li>Rows describing a field have to start with &#8220;<tt class="docutils literal"><span class="pre">F</span></tt>&#8221;.</li>
<li>Rows starting with an empty column will not be parsed by cutplace and
can contain any information that is helpful for human readers to
better understand the interface.</li>
</ul>
</div>
<div class="section" id="adding-examples">
<h2>Adding examples<a class="headerlink" href="#adding-examples" title="Permalink to this headline">¶</a></h2>
<p>Most people find it easiest to get a general grasp of something by
looking at an example. Cutplace supports this line of thinking by
letting you add an examples for a field right after the name:</p>
<table border="1" class="docutils">
<colgroup>
<col width="3%" />
<col width="57%" />
<col width="40%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td rowspan="2">&nbsp;</td>
<td rowspan="2">Fields</td>
<td rowspan="2">&nbsp;</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">&nbsp;</td>
<td rowspan="2"><em>Name</em></td>
<td rowspan="2"><em>Example</em></td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">branch_id</td>
<td rowspan="2"><strong>38000</strong></td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">customer_id</td>
<td rowspan="2"><strong>16</strong></td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">first_name</td>
<td rowspan="2"><strong>Jane</strong></td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">surname</td>
<td rowspan="2"><strong>Doe</strong></td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">gender</td>
<td rowspan="2"><strong>female</strong></td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">date_of_birth</td>
<td rowspan="2"><strong>27.02.1946</strong></td>
</tr>
<tr class="row-even"></tr>
</tbody>
</table>
<p>See: <a class="reference download internal" href="_downloads/icd_customers_with_examples.csv"><tt class="xref download docutils literal"><span class="pre">icd_customers_with_examples.csv</span></tt></a>
or <a class="reference download internal" href="_downloads/icd_customers_with_examples.ods"><tt class="xref download docutils literal"><span class="pre">icd_customers_with_examples.ods</span></tt></a></p>
<p>Finding an example usually does not require much imagination. In this
case we just took the values from the first customer and changed the
name to the generic &#8220;Jane Doe&#8221;.</p>
<p>These examples are entirely optional. If you cannot find a good example
for a field (like one containing a database BLOB) or you do not think
a real world example does not add any value (like for a field
containing an encrypted password), feel free to leave it empty.</p>
</div>
<div class="section" id="allowing-fields-to-be-empty">
<h2>Allowing fields to be empty<a class="headerlink" href="#allowing-fields-to-be-empty" title="Permalink to this headline">¶</a></h2>
<p>So far, every data item had an actual value and none of it was empty.
But what if for instance we do not know the date of birth for one of
our customers? Consider the following example data file:</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="20%" />
<col width="18%" />
<col width="13%" />
<col width="11%" />
<col width="23%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td rowspan="2">Branch id</td>
<td rowspan="2">Customer id</td>
<td rowspan="2">First name</td>
<td rowspan="2">Surname</td>
<td rowspan="2">Gender</td>
<td rowspan="2">Date of birth</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">38000</td>
<td rowspan="2">16</td>
<td rowspan="2">Daisy</td>
<td rowspan="2">Mason</td>
<td rowspan="2">female</td>
<td rowspan="2">27.02.1946</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">38000</td>
<td rowspan="2">42</td>
<td rowspan="2">Wendy</td>
<td rowspan="2">Davis</td>
<td rowspan="2">female</td>
<td rowspan="2">30.12.1971</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">38000</td>
<td rowspan="2">57</td>
<td rowspan="2">Keith</td>
<td rowspan="2">Parker</td>
<td rowspan="2">male</td>
<td rowspan="2">02.06.1984</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">38000</td>
<td rowspan="2">76</td>
<td rowspan="2">Kenneth</td>
<td rowspan="2">Tucker</td>
<td rowspan="2">male</td>
<td rowspan="2">&nbsp;</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">38053</td>
<td rowspan="2">2</td>
<td rowspan="2">Carlos</td>
<td rowspan="2">Barrett</td>
<td rowspan="2">male</td>
<td rowspan="2">09.02.1929</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">38053</td>
<td rowspan="2">20</td>
<td rowspan="2">Terrance</td>
<td rowspan="2">Hart</td>
<td rowspan="2">male</td>
<td rowspan="2">11.03.1961</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">38053</td>
<td rowspan="2">34</td>
<td rowspan="2">Lori</td>
<td rowspan="2">Dunn</td>
<td rowspan="2">female</td>
<td rowspan="2">26.09.1996</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">38053</td>
<td rowspan="2">73</td>
<td rowspan="2">Mary</td>
<td rowspan="2">Sutton</td>
<td rowspan="2">female</td>
<td rowspan="2">09.12.1982</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">38053</td>
<td rowspan="2">83</td>
<td rowspan="2">Lorraine</td>
<td rowspan="2">Castro</td>
<td rowspan="2">female</td>
<td rowspan="2">15.08.1978</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">38111</td>
<td rowspan="2">16</td>
<td rowspan="2">Esther</td>
<td rowspan="2">Newman</td>
<td rowspan="2">female</td>
<td rowspan="2">&nbsp;</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">38111</td>
<td rowspan="2">79</td>
<td rowspan="2">Tyler</td>
<td rowspan="2">Rose</td>
<td rowspan="2">male</td>
<td rowspan="2">17.12.1920</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">38111</td>
<td rowspan="2">96</td>
<td rowspan="2">Andrew</td>
<td rowspan="2">Dixon</td>
<td rowspan="2">male</td>
<td rowspan="2">02.10.1913</td>
</tr>
<tr class="row-even"></tr>
</tbody>
</table>
<p>See: <a class="reference download internal" href="_downloads/customers_without_date_of_birth.csv"><tt class="xref download docutils literal"><span class="pre">customers_without_date_of_birth.csv</span></tt></a></p>
<p>Two customers do not have a date of birth: Kenneth Tucker in row 4 and
Ester Newman in row 10.</p>
<p>Now try to validate these data with the same ICD we used before:</p>
<div class="highlight-python"><pre>cutplace icd_customers_1.ods customers_without_date_of_birth.csv</pre>
</div>
<p>This time the output contains the following lines:</p>
<div class="highlight-python"><pre>INFO:cutplace:validate "customers_without_date_of_birth.csv"
...
ERROR:cutplace:items: ['38000', '76', 'Kenneth', 'Tucker', 'male', '']
ERROR:cutplace:field error: field 'date_of_birth' must match format: value must not be empty
...
ERROR:cutplace:items: ['38111', '16', 'Esther', 'Newman', 'female', '']
ERROR:cutplace:field error: field 'date_of_birth' must match format: value must not be empty
...</pre>
</div>
<p>The essential part here is:</p>
<div class="highlight-python"><pre>field 'date_of_birth' must match format: value must not be empty</pre>
</div>
<p>When you describe a field to cutplace in the ICD, it assumes that the
data always provide a value for this field. Apparently this is not the
case with the data provided, so cutplace complains about it.</p>
<p>But what if there are actually customers we do not yet know the date of
birth yet? Not every business transactions requires the date of birth,
so this is perfectly valid.</p>
<p>So we have to tell cutplace that this field actually can be empty. This
can easily be done by adding another column to the field description,
where fields that can be empty are marked with an <tt class="docutils literal"><span class="pre">X</span></tt>:</p>
<table border="1" class="docutils">
<colgroup>
<col width="2%" />
<col width="49%" />
<col width="24%" />
<col width="24%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td rowspan="2">&nbsp;</td>
<td rowspan="2">Fields</td>
<td rowspan="2">&nbsp;</td>
<td rowspan="2">&nbsp;</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">&nbsp;</td>
<td rowspan="2">Name</td>
<td rowspan="2">Example</td>
<td rowspan="2"><strong>Empty?</strong></td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">branch_id</td>
<td rowspan="2">38000</td>
<td rowspan="2">&nbsp;</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">customer_id</td>
<td rowspan="2">16</td>
<td rowspan="2">&nbsp;</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">first_name</td>
<td rowspan="2">Jane</td>
<td rowspan="2">&nbsp;</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">surname</td>
<td rowspan="2">Doe</td>
<td rowspan="2">&nbsp;</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">gender</td>
<td rowspan="2">female</td>
<td rowspan="2">&nbsp;</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">date_of_birth</td>
<td rowspan="2">27.02.1946</td>
<td rowspan="2"><strong>X</strong></td>
</tr>
<tr class="row-even"></tr>
</tbody>
</table>
<p>See: <a class="reference download internal" href="_downloads/icd_customers_with_empty_fields.csv"><tt class="xref download docutils literal"><span class="pre">icd_customers_with_empty_fields.csv</span></tt></a>
or <a class="reference download internal" href="_downloads/icd_customers_with_empty_fields.ods"><tt class="xref download docutils literal"><span class="pre">icd_customers_with_empty_fields.ods</span></tt></a></p>
<p>Now lets try again with the new ICD:</p>
<div class="highlight-python"><pre>cutplace icd_customers_with_empty_fields.ods customers_without_date_of_birth.csv</pre>
</div>
<p>This time, no error messages show up and all the data are accepted.</p>
</div>
<div class="section" id="limiting-the-length-of-field-values">
<h2>Limiting the length of field values<a class="headerlink" href="#limiting-the-length-of-field-values" title="Permalink to this headline">¶</a></h2>
<p>Right now we allow the fields to have any length. But what if the data should be
processes by another program, which wants to insert the data in a database?
Every field in the database has a limit on how many characters it can hold. If
there are too many characters, the import will fail. And not always with an
error message that makes it easy to backtrack where the broken data came from.</p>
<p>Fortunately, cutplace allows to describe length limits for fields:</p>
<table border="1" class="docutils">
<colgroup>
<col width="2%" />
<col width="43%" />
<col width="21%" />
<col width="13%" />
<col width="21%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td rowspan="2">&nbsp;</td>
<td rowspan="2">Name</td>
<td rowspan="2">Example</td>
<td rowspan="2">Empty?</td>
<td rowspan="2"><strong>Length</strong></td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">branch_id</td>
<td rowspan="2">38000</td>
<td rowspan="2">&nbsp;</td>
<td rowspan="2"><strong>5</strong></td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">customer_id</td>
<td rowspan="2">16</td>
<td rowspan="2">&nbsp;</td>
<td rowspan="2"><strong>2:</strong></td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">first_name</td>
<td rowspan="2">Jane</td>
<td rowspan="2">&nbsp;</td>
<td rowspan="2"><strong>:60</strong></td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">surname</td>
<td rowspan="2">Doe</td>
<td rowspan="2">&nbsp;</td>
<td rowspan="2"><strong>:60</strong></td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">gender</td>
<td rowspan="2">female</td>
<td rowspan="2">&nbsp;</td>
<td rowspan="2"><strong>4:6</strong></td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">date_of_birth</td>
<td rowspan="2">27.02.1946</td>
<td rowspan="2">X</td>
<td rowspan="2"><strong>10</strong></td>
</tr>
<tr class="row-even"></tr>
</tbody>
</table>
<p>See: <a class="reference download internal" href="_downloads/icd_customers_with_lengths.csv"><tt class="xref download docutils literal"><span class="pre">icd_customers_with_lengths.csv</span></tt></a>
or <a class="reference download internal" href="_downloads/icd_customers_with_lengths.ods"><tt class="xref download docutils literal"><span class="pre">icd_customers_with_lengths.ods</span></tt></a></p>
<p>Let&#8217;s take a closer look at these examples, especially at the meaning of
the colon (:) in some of the description of the lengths.</p>
<ul>
<li><p class="first">The <tt class="docutils literal"><span class="pre">branch_id</span></tt> always has to have exactly 5 characters, so its
length is <tt class="docutils literal"><span class="pre">5</span></tt>.</p>
</li>
<li><p class="first">Let&#8217;s assume same the <tt class="docutils literal"><span class="pre">customer_id</span></tt> has to have at least 2 characters
because one of them is a checksum in order to catch (most) mistyped
numbers. In this case, the length is <tt class="docutils literal"><span class="pre">2:</span></tt>.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">first_name</span></tt> and <tt class="docutils literal"><span class="pre">surname</span></tt> can take at most 60 characters, maybe
because someone said so way back in the 70s when COBOL ruled the world.
To express this as length, use <tt class="docutils literal"><span class="pre">:60</span></tt>.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">gender</span></tt> can be <tt class="docutils literal"><span class="pre">male</span></tt> or <tt class="docutils literal"><span class="pre">female</span></tt>, so its length is between
4 and 6, which reads as <tt class="docutils literal"><span class="pre">4:6</span></tt>.</p>
</li>
<li><p class="first">And finally, <tt class="docutils literal"><span class="pre">date_of_birth</span></tt> always takes exactly 10 characters
because apparently we require it to use leading zeros. This is
similar to <tt class="docutils literal"><span class="pre">brach_id</span></tt>, which also used an exact length.</p>
<p>Wait a second, didn&#8217;t we state before that the <tt class="docutils literal"><span class="pre">date_of_birth</span></tt> can be
empty? Shouldn&#8217;t we use <tt class="docutils literal"><span class="pre">0:10</span></tt> then? Actually no, because this would
also accept dates with a length of 1, 2, 3 and so on until 9. The
possibility that <tt class="docutils literal"><span class="pre">date_of_birth</span></tt> can have a length of 0 is already
taken care of by the <tt class="docutils literal"><span class="pre">X</span></tt> in the <em>Empty?</em> column.</p>
</li>
</ul>
<p>To summarize: lengths are either exact values (like <tt class="docutils literal"><span class="pre">5</span></tt>) or ranges
with an lower and upper limit separated by a colon (like <tt class="docutils literal"><span class="pre">4:6</span></tt>).
Either the lower or upper limit can be omitted (like <tt class="docutils literal"><span class="pre">2:</span></tt> or <tt class="docutils literal"><span class="pre">:60</span></tt>).</p>
<p>In case you cannot decide yet on a reasonable limit on a certain field,
just leave its entry in the <em>Length</em> column empty.</p>
<p>Now lets try again with the new ICD:</p>
<div class="highlight-python"><pre>cutplace icd_customers_with_lengths.ods customers_without_date_of_birth.csv</pre>
</div>
<p>As expected, all the data are accepted again.</p>
</div>
<div class="section" id="field-types-and-rules">
<h2>Field types and rules<a class="headerlink" href="#field-types-and-rules" title="Permalink to this headline">¶</a></h2>
<p>So far, all the validations have been rather simple and generic. It&#8217;s
time to reveal the big guns: types and rules.</p>
<p>Let&#8217;s take a closer look at the <tt class="docutils literal"><span class="pre">customer_id</span></tt>. Apparently, it&#8217;s a
number. To be more specific, an integer number with no fractional part.
Let&#8217;s say the same person who told us that a <tt class="docutils literal"><span class="pre">customer_id</span></tt> has at
least two digits now informed us that due a design stemming from the 16
bit era, the highest <tt class="docutils literal"><span class="pre">customer_id</span></tt> is 65535 (the largest number one
can represent with 16 bit). Here&#8217;s how to express this knowledge with
cutplace:</p>
<table border="1" class="docutils">
<colgroup>
<col width="1%" />
<col width="28%" />
<col width="14%" />
<col width="8%" />
<col width="8%" />
<col width="17%" />
<col width="23%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td rowspan="2">&nbsp;</td>
<td rowspan="2">Name</td>
<td rowspan="2">Example</td>
<td rowspan="2">Empty?</td>
<td rowspan="2">Length</td>
<td rowspan="2"><strong>Type</strong></td>
<td rowspan="2"><strong>Rule</strong></td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">branch_id</td>
<td rowspan="2">38000</td>
<td rowspan="2">&nbsp;</td>
<td rowspan="2">5</td>
<td rowspan="2">&nbsp;</td>
<td rowspan="2">&nbsp;</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">customer_id</td>
<td rowspan="2">16</td>
<td rowspan="2">&nbsp;</td>
<td rowspan="2">2:</td>
<td rowspan="2"><strong>Integer</strong></td>
<td rowspan="2"><strong>10:65535</strong></td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">first_name</td>
<td rowspan="2">Jane</td>
<td rowspan="2">&nbsp;</td>
<td rowspan="2">:60</td>
<td rowspan="2">&nbsp;</td>
<td rowspan="2">&nbsp;</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">surname</td>
<td rowspan="2">Doe</td>
<td rowspan="2">&nbsp;</td>
<td rowspan="2">:60</td>
<td rowspan="2">&nbsp;</td>
<td rowspan="2">&nbsp;</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">gender</td>
<td rowspan="2">female</td>
<td rowspan="2">&nbsp;</td>
<td rowspan="2">2:6</td>
<td rowspan="2"><strong>Choice</strong></td>
<td rowspan="2"><strong>male, female</strong></td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">F</td>
<td rowspan="2">date_of_birth</td>
<td rowspan="2">27.02.1946</td>
<td rowspan="2">X</td>
<td rowspan="2">10</td>
<td rowspan="2"><strong>DateTime</strong></td>
<td rowspan="2"><strong>DD.MM.YYYY</strong></td>
</tr>
<tr class="row-even"></tr>
</tbody>
</table>
<p>See: <a class="reference download internal" href="_downloads/icd_customers_with_types_and_rules.csv"><tt class="xref download docutils literal"><span class="pre">icd_customers_with_types_and_rules.csv</span></tt></a>
or <a class="reference download internal" href="_downloads/icd_customers_with_types_and_rules.ods"><tt class="xref download docutils literal"><span class="pre">icd_customers_with_types_and_rules.ods</span></tt></a></p>
<p>The column <em>Type</em> can contain one of several available types. The column
<em>Rule</em> can hold a text that gives further details about the <em>Type</em>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Type names are case sensitive. So when you specify a type, make sure
the letters match exactly concerning upper and lower case.</p>
</div>
<p>In case of <tt class="docutils literal"><span class="pre">customer_id</span></tt>, the type is <tt class="docutils literal"><span class="pre">Integer</span></tt>. In this case, the
rule can specify a valid range. The syntax for the range is the same
we&#8217;ve been using already for the <em>Length</em> column. So <tt class="docutils literal"><span class="pre">10:65535</span></tt> means
&#8220;between 10 and 65535&#8221;.</p>
<p>For <tt class="docutils literal"><span class="pre">gender</span></tt>, the type is <tt class="docutils literal"><span class="pre">Choice</span></tt> which means that every value in
this field must be in a list of possible choices specified with the
rule. Here, possible choices are <tt class="docutils literal"><span class="pre">male</span></tt> and <tt class="docutils literal"><span class="pre">female</span></tt>.</p>
<p>Finally <tt class="docutils literal"><span class="pre">date_of_birth</span></tt> is of type <tt class="docutils literal"><span class="pre">DateTime</span></tt>. The rule describes
the date format using place holders: <tt class="docutils literal"><span class="pre">DD</span></tt> (day), <tt class="docutils literal"><span class="pre">MM</span></tt> (month),
<tt class="docutils literal"><span class="pre">YYYY</span></tt> (year including century) and <tt class="docutils literal"><span class="pre">YY</span></tt> (year without century). Any
other character must show up literally, for example the <tt class="docutils literal"><span class="pre">.</span></tt> in the
rule must show up as <tt class="docutils literal"><span class="pre">.</span></tt> in the value.</p>
<p>This tutorial showcases just a few of the types available.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="writing-an-icd.html#field-format-decimal"><em>Decimal</em></a></dt>
<dd>A field format to describe decimal numbers with a fractional part.</dd>
<dt><a class="reference internal" href="writing-an-icd.html#field-format-pattern"><em>Pattern</em></a></dt>
<dd>A field format to match patterns using asterisk (*) and question
mark (?) as placeholders.</dd>
<dt><a class="reference internal" href="writing-an-icd.html#field-format-regex"><em>RegEx</em></a></dt>
<dd>A field format to match patterns using regular expressions.</dd>
</dl>
</div>
</div>
<div class="section" id="checking-general-conditions">
<h2>Checking general conditions<a class="headerlink" href="#checking-general-conditions" title="Permalink to this headline">¶</a></h2>
<p>So far we learned how to validate the general data format and values
of separate fields. But what about conditions that are more sophisticated
and require several fields or rows to validate them?</p>
<p>For example, we might want to validate that every customer has a unique
<tt class="docutils literal"><span class="pre">customer_id</span></tt> within its assigned branch.</p>
<p>Or we might want to validate that the number of distinct branches does
remain within a certain limit, say, 3 branches.</p>
<p>For these kind of conditions cutplace supports <em>checks</em>. Here&#8217;s how it
looks in practice:</p>
<table border="1" class="docutils">
<colgroup>
<col width="1%" />
<col width="51%" />
<col width="18%" />
<col width="30%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td rowspan="2">&nbsp;</td>
<td rowspan="2">Checks</td>
<td rowspan="2">&nbsp;</td>
<td rowspan="2">&nbsp;</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">&nbsp;</td>
<td rowspan="2"><em>Description</em></td>
<td rowspan="2"><em>Type</em></td>
<td rowspan="2"><em>Rule</em></td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">C</td>
<td rowspan="2">customer must be unique</td>
<td rowspan="2">IsUnique</td>
<td rowspan="2">branch_id, customer_id</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2">C</td>
<td rowspan="2">distinct branches must be within limit</td>
<td rowspan="2">DistinctCount</td>
<td rowspan="2">branch_id &lt;= 3</td>
</tr>
<tr class="row-even"></tr>
</tbody>
</table>
<p>See: <a class="reference download internal" href="_downloads/icd_customers.csv"><tt class="xref download docutils literal"><span class="pre">icd_customers.csv</span></tt></a>
or <a class="reference download internal" href="_downloads/icd_customers.ods"><tt class="xref download docutils literal"><span class="pre">icd_customers.ods</span></tt></a></p>
<p>As you can see, checks require a &#8220;C&#8221; in the first column.</p>
<p>Next there is a description of the check. This should be a meaningful
sentence because it shows up in error messages. It&#8217;s a good idea to word
them as &#8220;Something must be something else&#8221; sentences.</p>
<p>The remaining two columns contain the type of the check and the rule. How
the rule can look solely depends on the type of the check.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="writing-an-icd.html#check-distinct-count"><em>DistinctCount</em></a></dt>
<dd>A check to validate that the number of distinct values in a field
meets a specified condition.</dd>
<dt><a class="reference internal" href="writing-an-icd.html#check-is-unique"><em>IsUnique</em></a></dt>
<dd>A check to validate that a field value or a combination of field
values is unique in each row compared with all other rows.</dd>
</dl>
</div>
</div>
<div class="section" id="sniffing-drafts-from-data">
<span id="cutsniff"></span><span id="index-0"></span><h2>Sniffing drafts from data<a class="headerlink" href="#sniffing-drafts-from-data" title="Permalink to this headline">¶</a></h2>
<p>Creating ICDs from scratch by looking at a file and deducing the basic data
format and field properties from it is a rather cumbersome task. That&#8217;s
where <tt class="docutils literal"><span class="pre">cutsniff</span></tt> comes in: it takes a look at a data file, and creates an
ICD for it.</p>
<p>The resulting ICD can be used for validation immediately, though it is
recommeneded that you rework it to some extend. Nevertheless within seconds
you get an ICD that can immediately be used and possibly improved later on.</p>
<p>As example, consider our data file <tt class="docutils literal"><span class="pre">examples/customers.csv</span></tt>. To make
<tt class="docutils literal"><span class="pre">cutsniff</span></tt> create an ICD for it, run:</p>
<div class="highlight-python"><pre>cutsniff icd_customers_sniffed.csv examples/customers.csv</pre>
</div>
<p>The resulting <tt class="docutils literal"><span class="pre">icd_customers_sniffed.csv</span></tt> looks like this:</p>
<div class="highlight-python"><pre>Interface: &lt;Name&gt;

d,format,delimited
d,item delimiter,","
d,line delimiter,lf
d,escape character,""""
d,quote character,""""
d,encoding,ascii

,Field,Example,Empty?,Length,Type,Rule
f,column_a,,,5,Text,
f,column_b,,,2,Text,
f,column_c,,,4,Text,
f,column_d,,,3:7,Text,
f,column_e,,,4:6,Text,
f,column_f,,,10,Text,</pre>
</div>
<p>You can already use this to validate the data:</p>
<div class="highlight-python"><pre>cutplace icd_customers_sniffed.csv examples/customers.csv</pre>
</div>
<p>Nevertheless most sniffed ICDs will need manual tweaking before you can
apply them for other files. In particular, you should:</p>
<ul class="simple">
<li>Replace the heading <tt class="docutils literal"><span class="pre">Interface:</span> <span class="pre">&lt;Name&gt;</span></tt> by something more meaningful
so that you can quickly grasp the intent of the data the interface
describes.</li>
<li>Change the field names to something more meaningful than <tt class="docutils literal"><span class="pre">column_*</span></tt> in
order to understand the meaning of it.</li>
<li>Change the expected length of fields in order to validate other data
files that might contain longer or shorter values.</li>
<li>Save the ICD as ODS or Excel and make it easier to read by utilizing
colors and formatting</li>
</ul>
<p>In case the data file starts with a heading, you can exclude it from the
analysis using <tt class="docutils literal"><span class="pre">--head</span></tt>.</p>
<p>If CSV or PRN data files use an ecoding other than ASCII, you can specify
it using <tt class="docutils literal"><span class="pre">--data-encoding</span></tt>.</p>
<p>For example:</p>
<div class="highlight-python"><pre>cutplace --head 1 --data-encoding iso-8859-15 icd_customers_sniffed.csv examples/valid_customers_with_header_iso-8859-15.csv</pre>
</div>
<p>In case <tt class="docutils literal"><span class="pre">--head</span></tt> is specified, <tt class="docutils literal"><span class="pre">cutsniff</span></tt> uses the last header row to
derive field names by applying a couple of heuristics to turn them into
valid Python variable names.</p>
<p>If you prefer to set the field names already during sniffing instead of
manually adjusting them afterwards, you can use <tt class="docutils literal"><span class="pre">--names</span></tt> to specify a
comma separated list of names. For example:</p>
<div class="highlight-python"><pre>cutplace --head 1 --names "branchId,customerId,firstName,surName,gender,dateOfBirth" ...</pre>
</div>
<p>To get an overview of all command line options available, run:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">cutsniff</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
</div>
<div class="section" id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h2>
<p>You are now familiar with the basic concepts behind cutplace and should
be able to use this for writing reasonably complete and sophisticated
ICDs.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="writing-an-icd.html" title="Writing an Interface Control Document"
             >next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Download and Installation"
             >previous</a> |</li>
        <li><a href="contents.html">cutplace 0.7.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2009-2011, Thomas Aglassinger.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>